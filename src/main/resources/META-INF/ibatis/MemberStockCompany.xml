<?xml version="1.0" encoding="UTF-8"?>
<!--
 * MemberStockCompany
 *
 * Copyright (c) 2009 Hangzhou ValueSoft Inc., All rights reserved.
 *
 * This software is the confidential and proprietary information of
 * ValueSoft Company. ("Confidential Information").  You shall not
 * disclose such Confidential Information and shall use it only in
 * accordance with the terms of the license agreement you entered into
 * with ValueSoft.com.
 * 
 * Revision History
 * Date      		Programmer       Notes
 * 2013-12-29   	    juning		     Initial
 **********************************************************************
-->

<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "/WEB-INF/sql-map-2.dtd">
<sqlMap namespace="Stock_MemberStockCompany">
    
    <typeAlias alias="memberStockCompanyVO" type="com.j.stock.vo.MemberStockCompanyVO"/>

    <resultMap id="memberStockCompanyResult" class="memberStockCompanyVO">
        <result property="id" column="id"/>
        <result property="companyId" column="company_id"/>
        <result property="memberId" column="member_id"/>
        <result property="code" column="code"/>
        <result property="dataStatus" column="data_status"/>
        <result property="createdDate" column="created_date"/>
        <result property="modifiedDate" column="modified_date"/>
        <result property="createdBy" column="created_by"/>
        <result property="modifiedBy" column="modified_by"/>
    </resultMap>
	<select id="loadMemberStockCompanyVOList" resultMap="memberStockCompanyResult" parameterClass="Map">
	    <![CDATA[
	    	select * from `member_stock_company`
	    	where  data_status != 0 and company_id = #companyId# 
	    ]]>
    </select>
    
    <select id="checkMemberStockCompanyVOList" resultMap="memberStockCompanyResult" parameterClass="Map">
	    <![CDATA[
	    	select * from `member_stock_company`
	    	where  data_status != 0 and code = #code#   and created_by = #createdBy# 
	    ]]>
    </select>

    <select id="countMemberStockCompany" resultClass="Long" parameterClass="Map">
	    <![CDATA[
	    	select count(*) from `member_stock_company` 
	    	where data_status!=0 and company_id = #companyId# and training_class_id = #trainingClassId#
	    ]]>
    </select>
    
    <select id="loadMemberStockCompanyVOById" resultMap="memberStockCompanyResult" parameterClass="Long">
	    <![CDATA[
	    	select * from `member_stock_company` where id = #id#
	    ]]>
    </select>
	
	<insert id="insertMemberStockCompanyVO" parameterClass="memberStockCompanyVO">
	<![CDATA[
		INSERT INTO `member_stock_company` ( 
	            company_id ,
	            member_id ,
	            code ,
	            data_status ,
	            created_date ,
	            modified_date ,
	            created_by ,
	            modified_by 
        )
		VALUES( 
        	    #companyId# ,
        	    #memberId# ,
        	    #code# ,
        	    #dataStatus# ,
        	    #createdDate# ,
        	    #modifiedDate# ,
        	    #createdBy# ,
        	    #modifiedBy# 
        )
	]]>
		<selectKey resultClass="long" keyProperty="id">  
	      	<![CDATA[ SELECT LAST_INSERT_ID() AS ID ]]>   
	  	</selectKey>
	</insert>
	
	
	<update id="updateMemberStockCompanyVO" parameterClass="memberStockCompanyVO">
	<![CDATA[
	    UPDATE `member_stock_company` 
	    SET 
	        company_id = #companyId# ,
	        member_id = #memberId# ,
	        code = #code# ,
	        data_status = #dataStatus# ,
	        created_date = #createdDate# ,
	        modified_date = #modifiedDate# ,
	        created_by = #createdBy# ,
	        modified_by = #modifiedBy# 
        WHERE
	        id = #id#
	]]>
	</update>
	
	<update id="deleteMemberStockCompanys" parameterClass="Map">
		<![CDATA[
		    UPDATE `member_stock_company` set data_status = 0 ,
	        modified_date = #modifiedDate# ,
	        modified_by = #modifiedBy# 
	         where id in (#idList#)
		]]>
	</update>
	
	<update id="deleteMemberStockCompanyCode" parameterClass="Map">
		<![CDATA[
		    UPDATE `member_stock_company` set data_status = 0 
	         where created_by  = #createdBy# AND code = #code#
		]]>
	</update>
	
	<update id="deleteMemberStocksCompanyCode" parameterClass="Map">
		<![CDATA[
		    delete from `member_stock_company` 
	         where created_by  = #createdBy# AND code = #code#
		]]>
	</update>
	
	<update id="deleteMemberStockCompanyVOById" parameterClass="Long">
		<![CDATA[
		    UPDATE `member_stock_company` set data_status = 0 ,
	        modified_date = #modifiedDate# ,
	        modified_by = #modifiedBy# 
	         where id=#id#
		]]>
	</update>
	
	
</sqlMap>
